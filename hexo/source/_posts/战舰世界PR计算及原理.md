---
title: 战舰世界PR计算及原理
date: 2022-05-06 01:57:19
tags:
categories:
description:
---
# 战舰世界PR计算
## 现有的PR计算方法
### Step 1
先计算自己与期望伤害的比率

```
rDmg = actualDmg/expectedDmg
rWins = actualWins/expectedWins
rFrags = actualFrags/expectedFrags
```

### Step 2

再按照wows stats & numbers 的方法进行归一化处理

```
nDmg = max(0, (rDmg - 0.4) / (1 - 0.4))
nFrags = max(0, (rFrags - 0.1) / (1 - 0.1))
nWins = max(0, (rWins - 0.7) / (1 - 0.7))
```

### Step 3

最后计算PR的值

```
PR =  700*nDMG + 300*nFrags + 150*nWins
```



## 我认为更加合理的一种方法
### 现有问题

我们可以看到现有的方法更加注重期望和数据之间的关系

很多时候在低场数的时候这种方法上不合理的

本文将会尝试对该问题进行修正

### 如何解决

* 胜率的权重

我们可以通过一个简单的函数来对不同场次的人进行划分

在场次很低的时候降低胜率的权重

在场次很高的时候增加胜率的权重

我们选取函数

{% mathjax %}
f(x) = 100 \tan^{-1}(\frac{x}{40})
{% endmathjax %}

其中x代表你的场数

它的数值表如下

|  x  | f(x)  |
|  ----  | ----  |
| 10 | 24.5 |
| 20 | 46.4 |
| 30 | 64.4 |
| 40 | 78.5 |
| 50 | 89.6 |
| 100 | 119.0 |
| 200 | 137.3 |
| 400 | 147.1 |
| 800 | 152.0 |
| 1000 | 153.0 |
| 10000 | 156.7 |


数据包含四舍五入！

我们发现这样一个函数能够更加有效的对玩家的总场次进行区分

虽然该函数难以对单船的场次进行区分（做的时候再换就行了）

 * 关于场均的权重

在高场次时胜率已经很能说明问题

低胜率的情况下场均并不能正确的反映玩家水平

或者说舍弃胜率换来的场均更加不值钱

所以我们采用下面的函数来界定胜率对场均的权重

{% mathjax %}
g(x) = 100 \sin^{-1}(\frac{x}{100})
{% endmathjax %}


在低场次的时候胜率十分不精确，所以我们应该用场均更多的体现玩家的表现

所以我们可以对70场以下的玩家进行场均权重的修正


{% mathjax %}
h(x) = 100 \cos^{-1}(\frac{x}{70})
{% endmathjax %}


所以初版暂定这样了

最后结果为(战斗场数>70)

{% mathjax %}
PR = 10000*\tan^{-1}(\frac{BTS}{40})+100*\sin^{-1}(\frac{WR}{100})*DMG
{% endmathjax %}